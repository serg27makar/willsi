"use strict";

(function ($) {
  $(document).ready(function () {
    svg4everybody({});
    $('.zoom').magnify();
    var body = $('body');

    if (body.hasClass('index-cart')) {
      initSlider();
    }

    if (body.hasClass('index-page')) {
      AOS.init();
    }

    ;
    btnShow();
    btnShowTwo();
  }); // Page scroll to id

  $("a[href*='#']").mPageScroll2id({
    autoScrollSpeed: true
  }); // Cart slider

  var slides = $('.cart-thumbs .swiper-slide').length;

  if (slides <= 1 || slides > 3) {
    $('.cart-thumbs').hide();
  }

  function initSlider() {
    var cartClicked = $('.cart-thumbsEnv');
    var cartTopSlider = new Swiper('.cart-slider', {
      slidesPerView: 1,
      loop: false,
      speed: 1000,
      spaceBetween: 0
    });
    var cartBottomSlider = new Swiper('.cart-thumbs', {
      slidesPerView: slides,
      loop: false,
      speed: 1000,
      spaceBetween: 15,
      noSwiping: false,
      allowSlidePrev: false,
      allowSlideNext: false
    });
    cartBottomSlider.controller.control = cartTopSlider;
    cartTopSlider.controller.control = cartBottomSlider;
    cartClicked.on('click', '.swiper-slide', function (event) {
      event.preventDefault();
      cartTopSlider.slideTo($(this).index(), 1000);
    });
  } // Input checked js


  $(document).on('click', '.tags-list__item', function () {
    $(this).parents().find('.tags-active').removeClass('tags-active').next().removeAttr('checked');
    $(this).addClass('tags-active').next().attr('checked', 'checked');
  });
  $(document).on('click', '.box-tags__item', function () {
    $(this).parents().find('.tags-active').removeClass('tags-active').next().removeAttr('checked');
    $(this).addClass('tags-active').next().attr('checked', 'checked');
  }); // Btn fixed

  function btnShow() {
    if ($(window).scrollTop() > 800) {
      $('.btn-up, .link-fixed').addClass('btn-show');
    } else {
      $('.btn-up, .link-fixed').removeClass('btn-show');
    }
  }

  $(window).bind('scroll', btnShow);

  function btnShowTwo() {
    if ($(window).scrollTop() > 100) {
      $('.link-fixed').addClass('btn-show');
    } else {
      $('.link-fixed').removeClass('btn-show');
    }
  }

  $(window).bind('scroll', btnShowTwo); // Last Product

  var lastProductSlider = new Swiper('.card-slider', {
    slidesPerView: 4,
    spaceBetween: 0,
    noSwiping: false,
    allowSlidePrev: false,
    allowSlideNext: false,
    breakpoints: {
      992: {
        slidesPerView: 1,
        noSwiping: true,
        allowSlidePrev: true,
        allowSlideNext: true
      }
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev'
    }
  });
  $('.menu_click').on('click', function () {
    $('.menu_wrap').toggleClass('menu_wrap_active');
  }); // Navigation mobile

  var mobileToggle = $('.mobile-toggle');
  var closeButton = $('.header-mobile__close-button');
  var barsButton = $('.header-mobile__bars-button');
  barsButton.on('click', function () {
    mobileToggle.slideDown();
    $(this).hide();
    closeButton.show();
  });
  closeButton.on('click', function () {
    mobileToggle.slideUp();
    $(this).hide();
    barsButton.show();
  }); // Dropdown info

  $(document).on('click', '.catalog-top__button-drop', function (event) {
    event.preventDefault();
    var self = $(this);
    self.find('.icon').toggleClass('rotate-icon');
    self.parent().find('.dropdown-info').slideToggle();
  });
  $(document).on('click', '.for-me__button-drop', function (event) {
    event.preventDefault();
    var self = $(this);
    self.find('.icon').toggleClass('rotate-icon');
    self.parent().find('.dropdown-info-list').slideToggle();
  }); // Dropdown sidebar

  $(document).on('click', '.catalog-button', function (event) {
    event.preventDefault();
    var self = $(this);

    if (self.parent().hasClass('active-dropdown')) {
      self.parents('.catalog-body, .main-list__catalog-product').find('.active-dropdown').removeClass('active-dropdown').children().next().slideUp(300);
      self.parents('.catalog-body, .main-list__catalog-product').children().find('.catalog-button__text').removeClass('catalog-opened');
      self.parents('.catalog-body, .main-list__catalog-product').children().find('.icon').removeClass('rotate-icon');
    } else {
      self.parents('.catalog-body, .main-list__catalog-product').find('.active-dropdown').removeClass('active-dropdown').children().next().slideUp(300);
      self.parent().addClass('active-dropdown').children().next().slideDown(300);
      self.parents('.catalog-body, .main-list__catalog-product').children().find('.catalog-button__text').removeClass('catalog-opened');
      self.parents('.catalog-body, .main-list__catalog-product').children().find('.icon').removeClass('rotate-icon');
      self.children().next().addClass('rotate-icon');
      self.children().addClass('catalog-opened');
    }
  }); // Category list

  $(document).on('click', '.catalog-wrapper', function () {
    var self = $(this);
    self.toggleClass('border-fix');
    self.find('.icon').toggleClass('rotate-icon');
    self.parent().find('.catalog__category-list').slideToggle();
  }); // Tabs

  $(document).on('click', '.mobile_list__title', function () {
    if ($(this).parent().hasClass('active_tabs')) {
      $(this).parents('.mobile_list').find('.active_tabs').removeClass('active_tabs').next().slideUp(300);
    } else {
      $(this).parents('.mobile_list').find('.active_tabs').removeClass('active_tabs').next().slideUp(300);
      $(this).parent().addClass('active_tabs').next().slideDown(300);
    }
  }); // Tabs Product

  $(document).on('click', '.tabs-wrapper__button', function () {
    var self = $(this);
    var dataName = self.attr('data-tabs');
    var tabsWrapper = $('.tabs-wrapper__content-info');
    self.parents('.tabs-wrapper__top-button').find('.tabs-active').removeClass('tabs-active');
    self.addClass('tabs-active');
    $('.tabs-wrapper__show-tabs').hide();
    tabsWrapper.find('#' + dataName).show();
  }); // Modals

  $('#modal-enter').iziModal({
    overlayColor: 'rgba(102, 102, 102, 0.8)',
    zindex: 9999
  });
  $('#modal-registration').iziModal({
    overlayColor: 'rgba(102, 102, 102, 0.8)',
    zindex: 9999
  });
  $('#modal-profile').iziModal({
    overlayColor: 'rgba(102, 102, 102, 0.8)',
    zindex: 9999
  });
  $('#modal-link').iziModal({
    overlayColor: 'rgba(102, 102, 102, 0.8)',
    zindex: 9999
  });
  $('#modal-wowFirst').iziModal({
    overlayColor: 'rgba(102, 102, 102, 0.8)',
    zindex: 9999
  });
  $('#modal-wowSecond').iziModal({
    overlayColor: 'rgba(102, 102, 102, 0.8)',
    zindex: 9999
  }); // Admin List

  $(document).on('click', '.button-pen', function () {
    var inputRead = $(this).parent().find('input');
    inputRead.removeAttr('readonly');
    $(this).parent().addClass('input-checked');
    $(this).parent().addClass('input-check').removeClass('input-uncheck');
    $(this).removeClass('button-pen');
    $(this).addClass('button-checked');
  });
  $(document).on('click', '.button-checked', function () {
    var inputRead = $(this).parent().find('input');
    inputRead.attr('readonly', true);
    $(this).parent().removeClass('input-checked');
    $(this).parent().addClass('input-uncheck').removeClass('input-check');
    $(this).removeClass('button-checked');
    $(this).addClass('button-pen');
  });
  $('.main-envelope__input').on('focusout', function () {
    if ($(this).val() !== '') {
      $(this).attr('readonly', true);
      $(this).parent().removeClass('input-checked');
      $(this).parent().addClass('input-uncheck').addClass('input-check');
      $(this).next().removeClass('button-checked');
      $(this).next().addClass().addClass('button-pen');
    } else {}
  });
})(jQuery);